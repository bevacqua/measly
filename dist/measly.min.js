// measly@v1.3.8, MIT licensed. https://github.com/bevacqua/measly
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.measly=e()}}(function(){return function e(t,n,r){function o(u,c){if(!n[u]){if(!t[u]){var s="function"==typeof require&&require;if(!c&&s)return s(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){(function(n){"use strict";function r(e,t){function n(e,t){var n=t.method;if(t&&t.xhr&&t.xhr.method&&(n=t.xhr.method),!n)throw new Error("A request method must be specified.");return h(n,e,t)}function i(t){var n=o(t.context||e.context,!0);if(n)return n;var i=r(t||e,x);return x.children.push(i),i}function h(t,n,r){function o(){d(w,"create",w),p()}function i(e,t,n){function r(){var r={body:t,statusCode:n||e?500:200};d(w,"cache",e,t),l(e,r,t)}if(!w.prevented){if(w.requested===!0)throw new Error("A request has already been made. Prevent synchronously!");w.prevented=!0,u(r)}}function f(){var e=a.find(n,x);e&&(e.cached=!0,w.xhr=e,w.prevented=!0,d(w,"cache",e.error,e.body),l(e.error,e,e.body))}function p(){"GET"===t&&f(),w.prevented||(w.requested=!0,w.xhr=c(h,l),d(w,"request",w.xhr))}function l(e,t,r){w.error=e,w.response=r,w.done=!0,w.cache&&!t.cached&&(x.cache[n]={expires:a.expires(w.cache),error:e,body:r,statusCode:t.statusCode}),e?(d(w,"error",e,r),d(w,e.statusCode,e,r)):d(w,"data",r),m(w)}var h=r||{};h.json="json"in h?h.json:{},h.url=n,h.method=t.toUpperCase();var w=s({done:!1,requested:!1,prevented:!1,prevent:i,layer:x,context:h.context||e.context,cache:h.cache||e.cache,url:n,method:t},{"throws":!1});return w.abort=v.bind(null,w),u(o),y(w),w}function w(){f.requests(x,!0).forEach(v)}function v(e){e.aborted=!0,e.prevented=!0,d(e,"abort",e.xhr),e.xhr&&e.xhr.abort(),m(e)}function y(e){x.requests.push(e)}function m(e){var t=x.requests.indexOf(e),n=x.requests.splice(t,1);n.length&&d(e,"always",e.error,e.response,e)}var x=o(e.context,!0);return x?x:(x=s({layer:i,parent:t,context:e.context,children:[],requests:[],cache:{},abort:w,request:n},{"throws":!1}),p.forEach(function(e){x[e]=h.bind(null,e)}),l.push(x),x)}function o(e,t){function n(t){var n,r=t.length;for(n=0;n<r;n++){var o=t[n];if(o.context===e)return o}}if(void 0!==i)for(var r,o=f.contexts(i);e&&!r;){var u=n(o);if(u)return u.layer;e=e.parentNode,r=t===!0}}var i,u=e("raf"),c=e("xhr"),s=e("contra/emitter"),a=e("./cache"),f=e("./aggregate"),d=e("./emitCascade"),p=["get","post","put","delete","patch"],l=[];t.exports=i=r({context:n.document.body,base:""}),i.find=o,i.all=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./aggregate":16,"./cache":17,"./emitCascade":18,"contra/emitter":5,raf:11,xhr:14}],2:[function(e,t,n){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],3:[function(e,t,n){function r(){}var o=t.exports={};o.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],4:[function(e,t,n){"use strict";var r=e("ticky");t.exports=function(e,t,n){e&&r(function(){e.apply(n||null,t||[])})}},{ticky:12}],5:[function(e,t,n){"use strict";var r=e("atoa"),o=e("./debounce");t.exports=function(e,t){var n=t||{},i={};return void 0===e&&(e={}),e.on=function(t,n){return i[t]?i[t].push(n):i[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var r=arguments.length;if(1===r)delete i[t];else if(0===r)i={};else{var o=i[t];if(!o)return e;o.splice(o.indexOf(n),1)}return e},e.emit=function(){var t=r(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var u=(i[t]||[]).slice(0);return function(){var i=r(arguments),c=this||e;if("error"===t&&n["throws"]!==!1&&!u.length)throw 1===i.length?i[0]:i;return u.forEach(function(r){n.async?o(r,i,c):r.apply(c,i),r._once&&e.off(t,r)}),e}},e}},{"./debounce":4,atoa:2}],6:[function(e,t,n){function r(e,t,n){if(!c(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===s.call(e)?o(e,t,n):"string"==typeof e?i(e,t,n):u(e,t,n)}function o(e,t,n){for(var r=0,o=e.length;r<o;r++)a.call(e,r)&&t.call(n,e[r],r,e)}function i(e,t,n){for(var r=0,o=e.length;r<o;r++)t.call(n,e.charAt(r),r,e)}function u(e,t,n){for(var r in e)a.call(e,r)&&t.call(n,e[r],r,e)}var c=e("is-function");t.exports=r;var s=Object.prototype.toString,a=Object.prototype.hasOwnProperty},{"is-function":8}],7:[function(e,t,n){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){function r(e){var t=o.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=r;var o=Object.prototype.toString},{}],9:[function(e,t,n){var r=e("trim"),o=e("for-each"),i=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return o(r(e).split("\n"),function(e){var n=e.indexOf(":"),o=r(e.slice(0,n)).toLowerCase(),u=r(e.slice(n+1));"undefined"==typeof t[o]?t[o]=u:i(t[o])?t[o].push(u):t[o]=[t[o],u]}),t}},{"for-each":6,trim:13}],10:[function(e,t,n){(function(e){(function(){var n,r,o;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-o)/1e6},r=e.hrtime,n=function(){var e;return e=r(),1e9*e[0]+e[1]},o=n()):Date.now?(t.exports=function(){return Date.now()-o},o=Date.now()):(t.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:3}],11:[function(e,t,n){for(var r=e("performance-now"),o="undefined"==typeof window?{}:window,i=["moz","webkit"],u="AnimationFrame",c=o["request"+u],s=o["cancel"+u]||o["cancelRequest"+u],a=!0,f=0;f<i.length&&!c;f++)c=o[i[f]+"Request"+u],s=o[i[f]+"Cancel"+u]||o[i[f]+"CancelRequest"+u];if(!c||!s){a=!1;var d=0,p=0,l=[],h=1e3/60;c=function(e){if(0===l.length){var t=r(),n=Math.max(0,h-(t-d));d=n+t,setTimeout(function(){var e=l.slice(0);l.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(d)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return l.push({handle:++p,callback:e,cancelled:!1}),p},s=function(e){for(var t=0;t<l.length;t++)l[t].handle===e&&(l[t].cancelled=!0)}}t.exports=function(e){return a?c.call(o,function(){try{e.apply(this,arguments)}catch(t){setTimeout(function(){throw t},0)}}):c.call(o,e)},t.exports.cancel=function(){s.apply(o,arguments)}},{"performance-now":10}],12:[function(e,t,n){var r,o="function"==typeof setImmediate;r=o?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},t.exports=r},{}],13:[function(e,t,n){function r(e){return e.replace(/^\s*|\s*$/g,"")}n=t.exports=r,n.left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}},{}],14:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)t(e[n])}function o(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e,t,n){var r=e;return d(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=l(t,{uri:e}),r.callback=n,r}function u(e,t,n){return t=i(e,t,n),c(t)}function c(e){function t(){4===d.readyState&&i()}function n(){var e=void 0;if(e=d.response?d.response:d.responseText||s(d),g)try{e=JSON.parse(e)}catch(t){}return e}function r(e){return clearTimeout(w),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,a(e,f)}function i(){if(!h){var t;clearTimeout(w),t=e.useXDR&&void 0===d.status?200:1223===d.status?204:d.status;var r=f,o=null;return 0!==t?(r={body:n(),statusCode:t,method:y,headers:{},url:v,rawRequest:d},d.getAllResponseHeaders&&(r.headers=p(d.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),a(o,r,r.body)}}if("undefined"==typeof e.callback)throw new Error("callback argument missing");var c=!1,a=function(t,n,r){c||(c=!0,e.callback(t,n,r))},f={body:void 0,headers:{},statusCode:0,method:y,url:v,rawRequest:d},d=e.xhr||null;d||(d=e.cors||e.useXDR?new u.XDomainRequest:new u.XMLHttpRequest);var l,h,w,v=d.url=e.uri||e.url,y=d.method=e.method||"GET",m=e.body||e.data||null,x=d.headers=e.headers||{},b=!!e.sync,g=!1;if("json"in e&&(g=!0,x.accept||x.Accept||(x.Accept="application/json"),"GET"!==y&&"HEAD"!==y&&(x["content-type"]||x["Content-Type"]||(x["Content-Type"]="application/json"),m=JSON.stringify(e.json))),d.onreadystatechange=t,d.onload=i,d.onerror=r,d.onprogress=function(){},d.ontimeout=r,d.open(y,v,!b,e.username,e.password),b||(d.withCredentials=!!e.withCredentials),!b&&e.timeout>0&&(w=setTimeout(function(){h=!0,d.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)},e.timeout)),d.setRequestHeader)for(l in x)x.hasOwnProperty(l)&&d.setRequestHeader(l,x[l]);else if(e.headers&&!o(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(d.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(d),d.send(m),d}function s(e){if("document"===e.responseType)return e.responseXML;var t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function a(){}var f=e("global/window"),d=e("is-function"),p=e("parse-headers"),l=e("xtend");t.exports=u,u.XMLHttpRequest=f.XMLHttpRequest||a,u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:f.XDomainRequest,r(["get","put","post","patch","head","delete"],function(e){u["delete"===e?"del":e]=function(t,n,r){return n=i(t,n,r),n.method=e.toUpperCase(),c(n)}})},{"global/window":7,"is-function":8,"parse-headers":9,xtend:15}],15:[function(e,t,n){function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)o.call(n,r)&&(e[r]=n[r])}return e}t.exports=r;var o=Object.prototype.hasOwnProperty},{}],16:[function(e,t,n){"use strict";function r(e){return function(t,n){return t.push.apply(t,e(n)),t}}function o(e,t){var n=e.requests.concat(e.children.reduce(r(o),[]));return t&&(e.requests=[]),n}function i(e){var t=[{context:e.context,layer:e}];return t.concat(e.children.reduce(r(i),[]))}t.exports={requests:o,contexts:i}},{}],17:[function(e,t,n){"use strict";function r(e,t){for(var n,r=t;r;){if(n=r.cache,e in n){if(o(n[e]))return n[e];delete n[e]}r=r.parent}}function o(e){return e.expires-new Date>0}function i(e){return Date.now()+e}t.exports={find:r,expires:i}},{}],18:[function(e,t,n){"use strict";function r(){for(var e=Array.prototype.slice.call(arguments),t=e.shift(),n=[t],r=t.layer;r;)n.push(r),r=r.parent;n.reverse().forEach(function(n){n.emit.apply(t,e)})}t.exports=r},{}]},{},[1])(1)});